<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doğum Günün Kutlu Olsun Aşkım 💞</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#ff1493;
      --bg1:#ffe6f0;
      --bg2:#ff99cc;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Quicksand',sans-serif;
      background:radial-gradient(circle at center,var(--bg1),var(--bg2),#ff66b2);
      color:#000;
      overflow-x:hidden;
      text-align:center;
    }

    /* Intro / Start button (big center heart) */
    #introScreen{
      position:fixed; inset:0; z-index:9999;
      display:flex; align-items:center; justify-content:center; flex-direction:column;
      gap:14px;
      background: radial-gradient(circle at center,#ffb6c1,#ff66b2,#ff1493);
      color:white;
      transition:opacity 1s ease, visibility 1s;
    }
    .introContent h2{font-size:2rem; margin:0; text-shadow:0 0 12px rgba(255,255,255,0.9)}
    .introContent p{margin:6px 0 0 0; font-size:1.1rem; text-shadow:0 0 8px rgba(255,255,255,0.7)}

    /* start button styling (initial big heart) */
    #startBtn{
      margin-top:12px;
      background:linear-gradient(90deg,#ff699f,#ff2e7a);
      border:none;
      color:white;
      padding:18px 22px;
      border-radius:999px;
      font-size:1.2rem;
      cursor:pointer;
      box-shadow:0 12px 40px rgba(255,20,147,0.35);
      transition:all .9s cubic-bezier(.2,.9,.2,1);
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }

    /* transform startBtn into small icon during move - applied dynamically */
    #startBtn.move-to-top {
      position:fixed;
      left:15px;
      top:15px;
      width:50px;
      height:50px;
      padding:0;
      border-radius:50%;
      font-size:1.2rem;
      transform: none;
      box-shadow:0 8px 24px rgba(0,0,0,0.12);
      z-index:10001;
    }

    /* Controls (play/pause/restart) */
    #controls{
      position:fixed;
      top:15px;
      left:15px;
      display:none;
      gap:12px;
      align-items:center;
      z-index:10000;
    }
    .iconButton{
      background:rgba(255,255,255,0.28);
      border:2px solid rgba(255,255,255,0.6);
      width:50px;height:50px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;
      cursor:pointer;backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(255,20,147,0.25);
      transition:transform .2s;
    }
    .iconButton:active{ transform:scale(.96) }

    .glowText{ color:white; font-size:.95rem; text-shadow:0 0 8px rgba(255,255,255,0.8); }

    /* Title + heartbeat */
    h1{
      margin-top:40px;
      font-size:2.6rem;
      color:#2b2b2b;
      text-shadow:0 0 12px rgba(255,255,255,0.8);
      animation: fadeIn 1.6s ease both, heartbeat 2.2s ease-in-out infinite;
      transform-origin:center;
    }
    @keyframes fadeIn { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)} }
    @keyframes heartbeat {
      0%,100%{ transform:scale(1) }
      30%{ transform:scale(1.06) }
      50%{ transform:scale(1) }
      70%{ transform:scale(1.08) }
    }

    /* Video wrapper + styling */
    #videoWrapper{ margin:30px auto; width:90%; max-width:480px; border-radius:20px; overflow:hidden; box-shadow:0 0 30px rgba(255,20,147,0.6) }
    iframe{ width:100%; height:270px; border:0; display:block }

    /* Message and big message */
    .message{
      margin:30px auto; font-size:1.15rem; line-height:1.7;
      background:rgba(255,255,255,0.55); padding:20px; border-radius:20px; max-width:92%;
      box-shadow:0 8px 24px rgba(255,255,255,0.4); opacity:0; transform:translateY(8px); transition:all .7s ease;
    }
    .message.show{ opacity:1; transform:translateY(0) }

    #bigMessage{
      margin-top:30px; font-size:1.8rem; font-weight:700; color:#2b2b2b;
      background:rgba(255,255,255,0.45); padding:18px; border-radius:24px; display:inline-block; opacity:0;
    }
    #bigMessage.show{ opacity:1; animation: slideDown 1s ease forwards }

    @keyframes slideDown { from{ transform:translateY(-20px); opacity:0 } to{ transform:translateY(0); opacity:1 } }

    /* Emoji floating */
    .emoji{ position:fixed; bottom:-50px; font-size:2rem; animation:flyUp 6s linear forwards; z-index:9000; pointer-events:none }
    @keyframes flyUp { 0%{transform:translateY(0) scale(1); opacity:1} 100%{transform:translateY(-900px) scale(1.6); opacity:0} }

    /* Heart burst (generic) */
    .burst-heart {
      position:fixed;
      pointer-events:none;
      z-index:12000;
      will-change: transform, opacity;
      transition: transform 1.6s cubic-bezier(.2,.8,.2,1), opacity 1.6s;
      font-size:20px;
      filter: drop-shadow(0 6px 16px rgba(255,105,180,0.25));
    }

    /* Pink wave on load */
    body::before{
      content:""; position:fixed; inset:0; z-index:9998; pointer-events:none;
      background: radial-gradient(circle at center, rgba(255,192,203,0.85), rgba(255,105,180,0.15), transparent);
      opacity:0; transform:scale(1.03); filter:blur(6px);
      animation: pinkFlash 2.1s ease-out forwards;
    }
    @keyframes pinkFlash { 0%{opacity:.95; transform:scale(1.04)} 50%{opacity:.7; filter:blur(3px)} 100%{opacity:0; transform:scale(1)} }

    /* music alert */
    #musicAlert{
      position:fixed; left:50%; bottom:28px; transform:translateX(-50%);
      background:rgba(255,255,255,0.92); color:var(--accent); padding:12px 18px; border-radius:22px;
      box-shadow:0 8px 30px rgba(255,20,147,0.18); font-weight:700; z-index:20000; opacity:0; transition:opacity .35s;
      display:flex; align-items:center; gap:10px;
    }
    #musicAlert.show{ opacity:1 }
    #musicAlert .arrow{ font-size:1.4rem; animation:bounceArrow 1s infinite alternate; }
    @keyframes bounceArrow { from{transform:translateY(0)} to{transform:translateY(-8px)} }

    /* responsive tweaks */
    @media(max-width:768px){
      h1{ font-size:2.1rem; margin-top:28px }
      #videoWrapper iframe{ height:220px }
      #startBtn.move-to-top{ left:10px; top:10px; width:46px; height:46px }
      #controls{ left:10px; top:10px }
    }
  </style>
</head>
<body>
  <!-- Intro overlay -->
  <div id="introScreen" role="dialog" aria-label="Hoşgeldin ekranı">
    <div class="introContent">
      <h2>💞 Hoş Geldin Aşkım 💞</h2>
      <p>Müziği başlatmak için kalbe dokun 💖</p>
      <button id="startBtn" aria-label="Müziği başlat">💓</button>
    </div>
  </div>

  <!-- Controls (hidden until after start) -->
  <div id="controls" aria-hidden="true">
    <button id="musicBtn" class="iconButton" aria-pressed="true">💓</button>
    <div id="musicText" class="glowText">Müziği Durdur</div>
    <button id="restartBtn" class="iconButton"></button>
    <div id="restartText" class="glowText"></div>
  </div>

  <h1 id="title">💖 Doğum Günün Kutlu Olsun Aşkım 💖</h1>

  <div id="videoWrapper">
    <iframe id="ytiframe" src="https://www.youtube.com/embed/sr7PADgCNP0?rel=0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>

  <div class="message" id="loveMessage">
    Bu özel gününde, seni ne kadar çok sevdiğimi bir kez daha hatırlatmak istedim. 💕  
    Sen benim hayatımın en güzel parçasısın 💞  
    Doğum günün kutlu olsun bir tanem 🎂  
    Nice mutlu, sağlıklı ve aşk dolu yıllarımız olsun 💫  
  </div>

  <div id="bigMessage">💞 SENİ ÇOK SEVİYORUM AŞKIM 💞<br>🎂 DOĞUM GÜNÜN KUTLU OLSUN 🎂</div>

  <audio id="bgMusic" loop preload="auto">
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- müzik uyarısı (15s sonra gösterilecek) -->
  <div id="musicAlert" role="status" aria-hidden="true">🎵 Videoyu başlatmadan önce müziği durdurmayı unutma! <span class="arrow">⬆S</span></div>

<script>
/* Elements */
const intro = document.getElementById('introScreen');
const startBtn = document.getElementById('startBtn');
const controls = document.getElementById('controls');
const musicBtn = document.getElementById('musicBtn');
const restartBtn = document.getElementById('restartBtn');
const musicText = document.getElementById('musicText');
const restartText = document.getElementById('restartText');
const music = document.getElementById('bgMusic');
const yt = document.getElementById('ytiframe');
const loveMessage = document.getElementById('loveMessage');
const bigMessage = document.getElementById('bigMessage');
const musicAlert = document.getElementById('musicAlert');

let isPlaying = false;
let emojiInterval = null;

/* helper to safely play sound (some browsers require user gesture) */
async function tryPlayAt(sec){
  try {
    music.currentTime = sec;
  } catch(e) {
    try{ music.currentTime = 0; }catch(e2){}
  }
  try {
    await music.play();
    isPlaying = true;
    musicBtn.textContent = '🔊';
    musicText.textContent = 'Müziği Durdur';
  } catch (err) {
    console.warn('play() rejected', err);
    isPlaying = false;
  }
}

/* HEART BURST helper - generic, usable anywhere */
function createBurstHearts(count = 30, origin = null){
  // origin: {x, y} in viewport px. if null, use center of window
  const ox = origin && origin.x ? origin.x : window.innerWidth/2;
  const oy = origin && origin.y ? origin.y : window.innerHeight/2;
  for (let i=0;i<count;i++){
    const h = document.createElement('div');
    h.className = 'burst-heart';
    h.textContent = '💖';
    // small random offset so they don't overlap exactly
    h.style.left = (ox + (Math.random()-0.5)*40) + 'px';
    h.style.top = (oy + (Math.random()-0.5)*40) + 'px';
    h.style.fontSize = (14 + Math.random()*28) + 'px';
    h.style.opacity = '1';
    document.body.appendChild(h);
    // animate using transform: random direction
    const dx = (Math.random()-0.5) * (200 + Math.random()*400);
    const dy = - (80 + Math.random()*420);
    const rot = Math.random()*720;
    // allow next frame to apply transition
    requestAnimationFrame(()=> {
      h.style.transform = `translate(${dx}px, ${dy}px) rotate(${rot}deg) scale(${1 + Math.random()*0.6})`;
      h.style.opacity = '0';
    });
    // cleanup
    setTimeout(()=> {
      try{ h.remove(); }catch(e){}
    }, 1700);
  }
}

/* move startBtn to top-left smoothly then reveal controls */
function animateStartToControls(){
  // create a burst at startBtn location for a nice effect when moving
  try {
    const rect = startBtn.getBoundingClientRect();
    createBurstHearts(22, {x: rect.left + rect.width/2, y: rect.top + rect.height/2});
  } catch(e){}

  startBtn.classList.add('move-to-top');
  setTimeout(()=> {
    controls.style.display = 'flex';
    controls.setAttribute('aria-hidden','false');
    musicBtn.textContent = isPlaying ? '🎶' : '🎶';
    musicText.textContent = isPlaying ? 'Müziği Durdur' : 'Devam Ettir';
    try{ startBtn.remove(); }catch(e){}
  }, 850);
}

/* start emojis and text animations after intro */
function startExtras(){
  // show message with word-by-word fade
  showMessageWords();
  // start emoji rain
  startEmojis();
  // show bigMessage after delay
  setTimeout(()=> { bigMessage.classList.add('show'); }, 2200);
}

/* word-by-word message (faster) */
function showMessageWords(){
  loveMessage.style.opacity = '1';
  const text = loveMessage.textContent.trim();
  loveMessage.textContent = '';
  const words = text.split(' ');
  words.forEach((w,i)=>{
    const sp = document.createElement('span');
    // ensure spacing preserved
    sp.textContent = w + (i<words.length-1 ? ' ' : '');
    sp.style.opacity = '0';
    sp.style.display = 'inline-block';
    sp.style.whiteSpace = 'pre';
    sp.style.transition = 'opacity .22s ease';
    loveMessage.appendChild(sp);
    setTimeout(()=> sp.style.opacity = '1', i * 120); // faster cadence
  });
}

/* emojis */
const emojis = ["💖","💞","💘","💝","💋","❤️","🩷","💕","💓","💗","💜","💙","🎂","🎉","✨","🌈","🌹"];
function startEmojis(){
  if(emojiInterval) return;
  emojiInterval = setInterval(()=>{
    const el = document.createElement('div');
    el.className = 'emoji';
    el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    el.style.left = Math.random()*100 + 'vw';
    el.style.fontSize = (1 + Math.random()*1.6) + 'rem';
    document.body.appendChild(el);
    setTimeout(()=> el.remove(), 6200);
  }, 200);
}

/* start button click */
startBtn.addEventListener('click', async () => {
  // try to set music time to 10s and play
  await tryPlayAt(10);

  // animate moving button to controls and hide intro overlay
  animateStartToControls();

  // fade out intro overlay
  intro.style.opacity = '0';
  setTimeout(()=> {
    try{ intro.remove(); }catch(e){}
  }, 900);

  // extras after small delay
  setTimeout(()=> startExtras(), 600);

  // schedule the 15s music alert from page load (if not already shown)
  // (If you want it counted from click instead of page load, move this to earlier)
});

/* music control button */
musicBtn.addEventListener('click', async () => {
  if(isPlaying){
    music.pause();
    isPlaying = false;
    musicBtn.textContent = '🔊';
    musicText.textContent = 'Devam Ettir';
    // heart burst when pausing
    createBurstHearts(30);
  } else {
    try {
      await music.play();
      isPlaying = true;
      musicBtn.textContent = '🔈';
      musicText.textContent = 'Müziği Durdur';
    } catch(e) { console.warn(e); }
  }
});

/* restart button */
restartBtn.addEventListener('click', async () => {
  try {
    // set to 10s and play
    await tryPlayAt(10);
    isPlaying = true;
    musicBtn.textContent = '❤️';
    musicText.textContent = 'Durdur';
  } catch(e){ console.warn(e); }
});

/* when video iframe clicked, pause music */
yt.addEventListener('click', () => {
  if(isPlaying){
    music.pause();
    isPlaying = false;
    musicBtn.textContent = '💔';
    musicText.textContent = 'Devam Ettir';
    // also a small heart burst to indicate pause
    createBurstHearts(18);
  }
});

/* Show music alert 15 seconds after page load (not after click) */
setTimeout(()=> {
  if (musicAlert) {
    musicAlert.classList.add('show');
    // hide after 7s
    setTimeout(()=> musicAlert.classList.remove('show'), 7000);
  }
}, 15000);

/* clicking musicAlert pauses music (convenience) */
if (musicAlert) {
  musicAlert.addEventListener('click', ()=> {
    try {
      if (music && !music.paused) {
        music.pause();
        isPlaying = false;
        musicBtn.textContent = '💔';
        musicText.textContent = 'Devam Ettir';
        createBurstHearts(20);
      }
      musicAlert.classList.remove('show');
    } catch(e){}
  });
}

/* accessibility: allow Enter key on startBtn (if not removed) */
startBtn.addEventListener('keydown', async (e) => {
  if(e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    startBtn.click();
  }
});

/* cleanup on unload */
window.addEventListener('beforeunload', ()=> {
  if(emojiInterval) clearInterval(emojiInterval);
});
</script>
</body>
</html>
